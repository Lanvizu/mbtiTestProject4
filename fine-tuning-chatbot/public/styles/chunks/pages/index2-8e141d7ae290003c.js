(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81],{4015:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/index2",function(){return s(5145)}])},5145:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7294),_public_styles_App2_module_css__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1957),_public_styles_App2_module_css__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_public_styles_App2_module_css__WEBPACK_IMPORTED_MODULE_6__),_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3019),next_image__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5675),next_image__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_2__),react_icons_ci__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(8138),react_icons_si__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7735),next_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1163),next_router__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_3__),typewriter_effect__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5459),typewriter_effect__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(typewriter_effect__WEBPACK_IMPORTED_MODULE_4__),loading_wait=0,all_log="",tern=0,user_log="",top_pred=0,need_ans_add=0,need_user_log_len=80,ending=0,mid_check=0;let max_tern=20;var intro=1,questionslist=_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.Xl;let shareKakaoLink=e=>{window.Kakao.Link.createCustomButton({container:"#kakao-link-btn",templateId:"96856",templateArgs:{userId:"".concat(e)}})},onShareKakaoClick=()=>{shareKakaoLink(userId)},scrollToBottom=()=>{let e=document.getElementById("message-list");e.scrollTop=e.scrollHeight},ChatApp=()=>{let[messages,setMessages]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[inputMessage,setInputMessage]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[loading,setLoading]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{let e=()=>{setLoading(!0)},n=()=>{setLoading(!1)};return next_router__WEBPACK_IMPORTED_MODULE_3___default().events.on("routeChangeStart",e),next_router__WEBPACK_IMPORTED_MODULE_3___default().events.on("routeChangeComplete",n),next_router__WEBPACK_IMPORTED_MODULE_3___default().events.on("routeChangeError",n),()=>{next_router__WEBPACK_IMPORTED_MODULE_3___default().events.off("routeChangeStart",e),next_router__WEBPACK_IMPORTED_MODULE_3___default().events.off("routeChangeComplete",n),next_router__WEBPACK_IMPORTED_MODULE_3___default().events.off("routeChangeError",n)}},[]);let sleep=e=>{let n=Date.now()+e;for(;Date.now()<n;);},loading_on=()=>{document.getElementById("spin").style.visibility="visible"},loading_off=()=>{document.getElementById("spin").style.visibility="hidden"};(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{window.addEventListener("resize",function(){scrollToBottom()}),scrollToBottom()},[messages]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{let e={text:"안녕, 친구야!\uD83E\uDD17 혹시 내가 너의 mbti를 맞춰봐도 될까?",isUser:!1};setMessages([e]);let n={text:"_kakao공유하기",isUser:!1};setMessages(e=>[...e,n]),window.Kakao&&!window.Kakao.isInitialized()&&(window.Kakao.init("0b8734b12b69c143778a10e9e76f4abd"),window.Kakao.isInitialized()),scrollToBottom()},[]);let handleSendMessage=async()=>{if(""!==inputMessage.trim()&&0===loading_wait){if(tern<=0){loading_wait=1;let newMessage={text:inputMessage,isUser:!0};setMessages(e=>[...e,newMessage]),setInputMessage(""),loading_on();let response=await fetch("".concat(_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.z0,"_2"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:[inputMessage]})}),data=await response.json(),yn=parseInt(data.data.toString());if(sleep(500),0===yn){let bot_ans=_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.bO[Math.floor(Math.random()*_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.bO.length)]+" "+_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.Qv[Math.floor(Math.random()*_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.Qv.length)]+" "+_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.Pl[Math.floor(Math.random()*_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.Pl.length)],botResponseMessage={text:bot_ans,isUser:!1};setMessages(e=>[...e,botResponseMessage]),tern-=1}else{let qindex=Math.floor(Math.random()*questionslist.length),t=questionslist[qindex];questionslist.splice(qindex,1);let initialBotMessage2={text:"좋아! 테스트를 위해 나랑 조금만 이야기하면 돼! \n보다 정확한 결과를 위해 단답은 피해줘~  \n "+_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.Z2[Math.floor(Math.random()*_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.Z2.length)]+" 첫 번째 질문! "+t,isUser:!1};setMessages(e=>[...e,initialBotMessage2]),all_log+="\nyou: "+t,need_ans_add=1}}else if(tern<max_tern){loading_wait=1,user_log.length>=need_user_log_len&&(tern=max_tern-1);let newMessage={text:inputMessage,isUser:!0};setMessages(e=>[...e,newMessage]),user_log+=inputMessage+" \n",setInputMessage("");let user_message="\nfriend: "+inputMessage+" \n\n### \nyou: ";1===need_ans_add&&(user_message+=_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.Fv[Math.floor(Math.random()*_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.Fv.length)],need_ans_add=0),all_log+=user_message;try{loading_on();let response=await fetch("".concat(_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.z0),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:[all_log]})});if(!response.ok)throw Error("Network response was not ok");let data=await response.json(),bot_ans=data.data.toString();all_log+=bot_ans;let botResponseMessage={text:bot_ans,isUser:!1};if(Math.random()>.4&&-1===bot_ans.indexOf("?")){user_log.length>=need_user_log_len/2&&0===mid_check&&(bot_ans+="\n"+_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__._P[Math.floor(Math.random()*_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__._P.length)],mid_check=1);let qindex=Math.floor(Math.random()*questionslist.length),t=questionslist[qindex];questionslist.splice(qindex,1),botResponseMessage={text:bot_ans+"\n 다음 질문! "+t,isUser:!1},all_log="\nyou: "+t,need_ans_add=1}setMessages(e=>[...e,botResponseMessage])}catch(error){console.error("Error sending message:",error)}}else if(tern===max_tern){if(user_log.length>=need_user_log_len)try{loading_wait=1;let newMessage={text:inputMessage,isUser:!0};setMessages(e=>[...e,newMessage]),user_log+=inputMessage+" \n",setInputMessage("");let user_message="\nfriend: "+inputMessage+" \n\n### \nyou: ";1===need_ans_add&&(user_message+=_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.Fv[Math.floor(Math.random()*_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.Fv.length)],need_ans_add=0),all_log+=user_message;try{loading_on();let response=await fetch("".concat(_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.z0),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:[all_log]})});if(!response.ok)throw Error("Network response was not ok");let data=await response.json(),bot_ans=data.data.toString();all_log+=bot_ans;let botResponseMessage={text:bot_ans,isUser:!1};setMessages(e=>[...e,botResponseMessage])}catch(error){console.error("Error sending message:",error)}let response=await fetch("".concat(_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.z0,"_1"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:[user_log]})}),data=await response.json();data=data.data,data=eval("("+data+")");let bot_ans=(0,_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.Hf)(data[0].label),t="너의 mbti는 "+bot_ans+"구나! \n"+(0,_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.Hf)(data[0].label)+" : "+Math.round(1e3*data[0].score)/10+"%, \n"+(0,_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.Hf)(data[1].label)+" : "+Math.round(1e3*data[1].score)/10+"%, \n"+(0,_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.Hf)(data[2].label)+" : "+Math.round(1e3*data[2].score)/10+"%, ",botResponseMessage2={text:t,isUser:!1};setMessages(e=>[...e,botResponseMessage2]);let botResponseMessage3={text:"_kakao공유하기",isUser:!1};setMessages(e=>[...e,botResponseMessage3])}catch(error){console.error("Error sending message:",error)}else{let initialBotMessage={text:"미안"+_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.Pl[Math.floor(Math.random()*_public_styles_value_list__WEBPACK_IMPORTED_MODULE_5__.Pl.length)]+"...모르겠어!\n\n(분석을 위한 글자 수를 채우지 못했습니다. 조금 더 성실히 대답해주세요)",isUser:!1};setMessages(e=>[...e,initialBotMessage])}}else{let bot_ans="...새로고침해주세요...",botResponseMessage={text:bot_ans,isUser:!1};setMessages(e=>[...e,botResponseMessage])}tern+=1,loading_off(),loading_wait=0}};return loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:_public_styles_App2_module_css__WEBPACK_IMPORTED_MODULE_6___default().spin,id:"spin",name:"spin",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{src:"spin.gif",alt:"loading"})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:_public_styles_App2_module_css__WEBPACK_IMPORTED_MODULE_6___default()["app-container"],children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:_public_styles_App2_module_css__WEBPACK_IMPORTED_MODULE_6___default().notbold,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_icons_ci__WEBPACK_IMPORTED_MODULE_7__.UTf,{})," mbti 테스트",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("hr",{})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:_public_styles_App2_module_css__WEBPACK_IMPORTED_MODULE_6___default()["chat-app"],children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:_public_styles_App2_module_css__WEBPACK_IMPORTED_MODULE_6___default()["chat-box"],children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:_public_styles_App2_module_css__WEBPACK_IMPORTED_MODULE_6___default()["message-list"],id:"message-list",name:"message-list",children:messages.map((e,n)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Message,{message:e},n))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:_public_styles_App2_module_css__WEBPACK_IMPORTED_MODULE_6___default().spin,id:"spin",name:"spin",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{src:"spin.gif",alt:"loading"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:_public_styles_App2_module_css__WEBPACK_IMPORTED_MODULE_6___default()["user-input-box"],children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"text",value:inputMessage,maxLength:30,onChange:e=>setInputMessage(e.target.value),className:_public_styles_App2_module_css__WEBPACK_IMPORTED_MODULE_6___default()["input-font"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{onClick:handleSendMessage,className:_public_styles_App2_module_css__WEBPACK_IMPORTED_MODULE_6___default()["button-font"],children:"Send"})," "]})]})})})]})})},Message=e=>{let{message:n}=e,s=n.isUser?_public_styles_App2_module_css__WEBPACK_IMPORTED_MODULE_6___default()["user-message"]:_public_styles_App2_module_css__WEBPACK_IMPORTED_MODULE_6___default()["bot-message"];return n.isUser?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:s,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:n.text})}):"_kakao공유하기"===n.text?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:s,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button",{className:_public_styles_App2_module_css__WEBPACK_IMPORTED_MODULE_6___default().kakaoButton,id:"kakao-link-btn",type:"button",onClick:onShareKakaoClick,children:["kakao로 결과 공유하기",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{src:"https://seeklogo.com/images/K/kakaotalk-logo-274D191B7B-seeklogo.com.png",height:"30"})]})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:s,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{children:["❚  ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_icons_si__WEBPACK_IMPORTED_MODULE_8__.Wff,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("br",{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(typewriter_effect__WEBPACK_IMPORTED_MODULE_4___default(),{options:{loop:!1,delay:45},onInit:e=>{e.typeString(n.text).callFunction(()=>{scrollToBottom()}).start()}})]})})};__webpack_exports__.default=ChatApp},3019:function(e,n,s){"use strict";s.d(n,{Fv:function(){return i},Hf:function(){return h},Pl:function(){return c},Qv:function(){return l},Xl:function(){return o},Z2:function(){return u},_P:function(){return d},bO:function(){return r},z0:function(){return a}});let a="https://ldhldh-chat-and-bert-rest-api-with-gradio.hf.space/run/predict",o=["너는 취미가 뭐니?","주말엔 주로 뭐를 해?","가장 좋아하는 음식이 뭐야?","자주 듣는 노래 장르가 뭐야?","친구는 많은 편이니?","내일은 뭐 할거야?","혹시 지금 솔로야?","요즘 듣는 노래가 있을까?","요즘 드라마는 뭐 봐?","가장 최근에 본 영화는 어떤 내용이야?","요즘 고민같은거 있어?","나한테 물어보고 싶은거 있어?","만약 여행을 간다면 어디로 가고싶어?","오늘 하루는 어땠어?","너는 꿈이 뭐야?","가장 좋아하는 색이 뭐야?","봄, 여름, 가을, 겨울중에 어떤 계절이 제일 좋아?","이제 물어볼 주제도 없따..","너의 인생 좌우명은 뭐야?","너는 이상형이 뭐야?","키우고 싶은 동물이 있어?","음...뭐를 물어보지...?","혹시 고양이 키워?","혹시 강아지 키워?","너 되게 좋은 사람같아","ㅎㅎ요즘 너무 바쁘다 그치","만약 내일 죽는다면 오늘 뭘 하고싶어?"],i=["아하"," 헐 "," 아 ","아 진짜"," 음 "," 그래? "," 엥 "," 오 "," 와 ","우와 ","와 정말","오 정말","아 정말","와 진짜","헐 진짜","키키","대박","그렇구나","오호 "," 음 "," 헉 ","나도 "," 헐 ","...","헤에","진짜","나는 ","너도 "," 난 ","ㅋㅋ","ㅎㅎ","\uD83D\uDE03","\uD83D\uDE01","응응"],r=["에이","왜애","아~","ㅠㅠ","힝","으악","ㅜ","아ㅠ"],l=["한번만 해보자 응?","한번만 해봐~","그러지 말구 한번 해보자 응?","해줄거지...?","해줄거라 믿어...","테스트 해줄거지...?"],c=["\uD83D\uDE22","ㅠ","TㅅT","\uD83D\uDE22","\uD83D\uDE22","","","\uD83D\uDE1F","",""],d=["...음...슬슬 조금만 더 들으면 알 수 있겠는데...? ","...오호...윤곽이 보인다! ","...너의 mbti는 파악되고있다... ","...거의 다 왔어! "],u=["자 그럼","그러면"," ","음..."];function h(e){return({LABEL_0:"INTJ",LABEL_1:"INTP",LABEL_2:"INFJ",LABEL_3:"INFP",LABEL_4:"ISTJ",LABEL_5:"ISTP",LABEL_6:"ISFJ",LABEL_7:"ISFP",LABEL_8:"ENTJ",LABEL_9:"ENTP",LABEL_10:"ENFJ",LABEL_11:"ENFP",LABEL_12:"ESTJ",LABEL_13:"ESTP",LABEL_14:"ESFJ",LABEL_15:"ESFP"})[e=e.toString()]}},1957:function(e){e.exports={"app-container":"App2_app-container__BNn_F","user-message":"App2_user-message__1fHhz","bot-message":"App2_bot-message__6rJhI","chat-app":"App2_chat-app__Qp1d6","message-list":"App2_message-list__OvJT_","user-input-box":"App2_user-input-box__z6ZHG",clearfix:"App2_clearfix__J74Rp",spin:"App2_spin__N9QzQ",notbold:"App2_notbold__V3HlQ",kakaoButton:"App2_kakaoButton__BbA_m"}}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[415,401,689,774,888,179],function(){return n(4015)}),_N_E=e.O()}]);